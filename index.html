<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SelfTrust - Constitutional Drift Detector</title>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
      background: linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0f172a 100%);
      color: #e2e8f0;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
    }

    .header {
      text-align: center;
      padding: 30px 0;
      border-bottom: 2px solid #334155;
      margin-bottom: 30px;
    }

    .header h1 {
      font-size: 2.5em;
      background: linear-gradient(to right, #60a5fa, #22d3ee);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 10px;
    }

    .header .subtitle {
      font-size: 0.95em;
      color: #cbd5e1;
      margin-bottom: 5px;
    }

    .header .tamil {
      font-size: 0.85em;
      color: #94a3b8;
    }

    .header .version {
      font-size: 0.75em;
      color: #64748b;
      background: #1e293b;
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      margin-top: 10px;
    }

    section {
      background: #1e293b;
      border: 1px solid #334155;
      border-radius: 12px;
      padding: 25px;
      margin-bottom: 20px;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    section h2 {
      color: #60a5fa;
      font-size: 1.4em;
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    section h2::before {
      content: "тЖТ";
      color: #22d3ee;
      font-weight: bold;
    }

    .helper-text {
      color: #94a3b8;
      font-size: 0.9em;
      margin-bottom: 10px;
    }

    .tamil-helper {
      color: #64748b;
      font-size: 0.85em;
      margin-bottom: 15px;
    }

    select, textarea, button {
      width: 100%;
      padding: 12px;
      border: 1px solid #475569;
      border-radius: 8px;
      background: #0f172a;
      color: #e2e8f0;
      font-size: 1em;
      font-family: inherit;
    }

    select:focus, textarea:focus {
      outline: none;
      border-color: #22d3ee;
      box-shadow: 0 0 0 3px rgba(34, 211, 238, 0.1);
    }

    textarea {
      resize: vertical;
      min-height: 100px;
    }

    button {
      background: linear-gradient(to right, #2563eb, #0ea5e9);
      border: none;
      color: white;
      font-weight: bold;
      cursor: pointer;
      margin-top: 10px;
      transition: all 0.3s;
    }

    button:hover {
      background: linear-gradient(to right, #1d4ed8, #0284c7);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(37, 99, 235, 0.4);
    }

    button:disabled {
      background: #334155;
      cursor: not-allowed;
      transform: none;
    }

    .law-box, .drift-box, .ppdtf-box {
      background: #0f172a;
      border: 1px solid #475569;
      border-radius: 8px;
      padding: 15px;
      margin-top: 15px;
    }

    .law-box h3, .drift-box h3, .ppdtf-box h3 {
      color: #22d3ee;
      font-size: 1em;
      margin-bottom: 10px;
    }

    .law-box ul, .drift-box ul {
      list-style: none;
      padding-left: 0;
    }

    .law-box li, .drift-box li {
      padding: 6px 0;
      padding-left: 20px;
      position: relative;
    }

    .law-box li::before {
      content: "тАв";
      color: #22d3ee;
      position: absolute;
      left: 0;
      font-weight: bold;
    }

    .drift-box li::before {
      content: "тЪа";
      position: absolute;
      left: 0;
    }

    .result-box {
      background: #0f172a;
      border: 2px solid #22d3ee;
      border-radius: 8px;
      padding: 20px;
      white-space: pre-wrap;
      font-family: 'Courier New', monospace;
      font-size: 0.9em;
      color: #cbd5e1;
      line-height: 1.6;
    }

    .impact-badge {
      display: inline-block;
      padding: 5px 15px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 0.9em;
    }

    .impact-high, .impact-critical, .impact-very-high {
      background: #dc2626;
      color: white;
    }

    .impact-medium, .impact-medium-high {
      background: #f59e0b;
      color: white;
    }

    .impact-low {
      background: #eab308;
      color: #1e293b;
    }

    .score-display {
      font-size: 2em;
      color: #22d3ee;
      font-weight: bold;
      text-align: center;
      margin: 15px 0;
    }

    .hidden {
      display: none;
    }

    .role-warning {
      background: #1e293b;
      border-left: 4px solid #f59e0b;
      padding: 15px;
      margin-top: 15px;
      border-radius: 4px;
    }

    .role-warning h4 {
      color: #f59e0b;
      margin-bottom: 8px;
      font-size: 0.95em;
    }

    .role-warning p {
      color: #cbd5e1;
      font-size: 0.9em;
      line-height: 1.5;
    }

    @media (max-width: 600px) {
      .header h1 {
        font-size: 1.8em;
      }
      section {
        padding: 20px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- HEADER -->
    <div class="header">
      <h1>SelfTrust</h1>
      <p class="subtitle">
        A system that interprets everyday observations<br>
        through constitutional intent and civic trust
      </p>
      <p class="tamil">
        родро┐ройроЪро░ро┐ роиро┐роХро┤рпНро╡рпБроХро│рпИ роЪроЯрпНроЯ роирпЛроХрпНроХроорпН рооро▒рпНро▒рпБроорпН<br>
        роХрпБроЯро┐роороХрпНроХро│рпН роироорпНрокро┐роХрпНроХрпИ роХрпЛрогродрпНродро┐ро▓рпН рокрпБро░ро┐роп ро╡рпИроХрпНроХрпБроорпН роЕроорпИрокрпНрокрпБ
      </p>
      <div class="version">Law Version: 2025-02-08 | Constitution of India + TN Laws</div>
    </div>

    <!-- SECTION 1: Domain Selection -->
    <section>
      <h2>Select Domain</h2>
      <p class="helper-text">Identifies the system affected</p>
      <p class="tamil-helper">рокро╛родро┐роХрпНроХрокрпНрокроЯрпБроорпН роЕроорпИрокрпНрокрпИ родрпЗро░рпНро╡рпБ роЪрпЖропрпНропро╡рпБроорпН</p>

      <select id="domain">
        <option value="River System">River System / роЖро▒рпНро▒рпБ роЕроорпИрокрпНрокрпБ</option>
        <option value="Forest Commons" disabled>Forest Commons / роХро╛роЯрпБ рокрпКродрпБ ро╡ро│роорпН (Coming soon)</option>
        <option value="Groundwater" disabled>Groundwater / роиро┐ро▓родрпНродроЯро┐ роирпАро░рпН (Coming soon)</option>
      </select>
    </section>

    <!-- SECTION 2: Context Selection -->
    <section>
      <h2>Where did this happen?</h2>
      <p class="helper-text">Context helps determine which laws and trust boundaries apply</p>
      <p class="tamil-helper">роЗроЯроорпН роЪроЯрпНроЯроорпБроорпН роироорпНрокро┐роХрпНроХрпИропрпБроорпН роОроЩрпНроХрпБ рокро╛родро┐роХрпНроХрокрпНрокроЯрпБроХро┐ройрпНро▒рой роОройрпНрокродрпИ роХро╛роЯрпНроЯрпБроХро┐ро▒родрпБ</p>

      <select id="context">
        <option value="">Select context...</option>
        <option value="river_bed_night">River Bed тАУ Night тЖТ Low visibility violations (sand extraction)</option>
        <option value="river_bed_daytime">River Bed тАУ Daytime тЖТ Large-scale operations (mechanized mining)</option>
        <option value="river_bank_ongoing">River Bank тАУ Ongoing тЖТ Repeated activities (water pumping)</option>
        <option value="river_bank_permanent">River Bank тАУ Permanent тЖТ Structures (construction, encroachment)</option>
        <option value="river_flow_night">River Flow тАУ Night тЖТ Hidden contamination (industrial effluent)</option>
        <option value="river_flow_allday">River Flow тАУ All Day тЖТ Constant pollution (sewage dumping)</option>
      </select>
    </section>

    <!-- SECTION 3: Role Selection (NEW!) -->
    <section>
      <h2>Who Are You in This Situation?</h2>
      <p class="helper-text">Your role determines responsibility and appropriate guidance</p>
      <p class="tamil-helper">роЙроЩрпНроХро│рпН рокроЩрпНроХрпБ рокрпКро▒рпБрокрпНрокрпИропрпБроорпН роЪро░ро┐ропро╛рой ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпИропрпБроорпН родрпАро░рпНрооро╛ройро┐роХрпНроХро┐ро▒родрпБ</p>

      <select id="userRole">
        <option value="">Select your role...</option>
        <option value="witness">ЁЯСБя╕П Witness / роЪро╛роЯрпНроЪро┐ тЖТ I observed this happening</option>
        <option value="offender">тЪая╕П Offender / роХрпБро▒рпНро▒ро╡ро╛ро│ро┐ тЖТ I am/was involved in this activity</option>
        <option value="facilitator">ЁЯдЭ Facilitator / роЙродро╡ро┐ропро╛ро│ро░рпН тЖТ I enable/enabled this (transport, supplies, etc.)</option>
        <option value="local_authority">ЁЯПЫя╕П Local Authority / роЙро│рпНро│рпВро░рпН роЕродро┐роХро╛ро░ро┐ тЖТ I have governance responsibility</option>
        <option value="enforcement">тЪЦя╕П Enforcement Authority / роЕрооро▓ро╛роХрпНроХ роЕродро┐роХро╛ро░ро┐ тЖТ I am responsible for enforcement</option>
      </select>

      <div class="role-warning">
        <h4>тЪая╕П Role Honesty Matters</h4>
        <p>
          Your role selection is <strong>confidential</strong> and used only for analysis. 
          Honest role identification ensures you receive appropriate guidance tailored to your actual responsibility.
        </p>
        <p style="margin-top: 8px; color: #94a3b8;">
          роЗроирпНрод родроХро╡ро▓рпН ро░роХроЪро┐ропрооро╛ройродрпБ рооро▒рпНро▒рпБроорпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБроХрпНроХрпБ роороЯрпНроЯрпБроорпЗ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН. 
          роирпЗро░рпНроорпИропро╛рой рокроЩрпНроХрпБ роЕроЯрпИропро╛ро│роорпН роЪро░ро┐ропро╛рой ро╡ро┤ро┐роХро╛роЯрпНроЯрпБродро▓рпИ роЙро▒рпБродро┐ роЪрпЖропрпНроХро┐ро▒родрпБ.
        </p>
      </div>
    </section>

    <!-- SECTION 4: User Observation -->
    <section>
      <h2>Describe What You Observed</h2>
      <p class="helper-text">Describe only what you saw. No judgement.</p>
      <p class="tamil-helper">роирпАроЩрпНроХро│рпН рокро╛ро░рпНродрпНродродрпИ роороЯрпНроЯрпБроорпН роОро┤рпБродрпБроЩрпНроХро│рпН. родрпАро░рпНрокрпНрокрпБ роЕро▓рпНро▓родрпБ роХрпБро▒рпНро▒роЪрпНроЪро╛роЯрпНроЯрпБ ро╡рпЗрогрпНроЯро╛роорпН.</p>

      <textarea id="observation" placeholder="Example: Night-time sand extraction using bullock cart...">Night-time sand extraction using bullock cart</textarea>

      <button onclick="analyze()" id="analyzeBtn">Analyze Situation / роЪроорпНрокро╡родрпНродрпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНроХ</button>
    </section>

    <!-- SECTION 5: Law Intent (Initially Hidden) -->
    <section id="lawSection" class="hidden">
      <h2>Relevant Law Intent</h2>
      <div class="law-box">
        <h3>Constitutional & Statutory Principles:</h3>
        <ul id="lawList"></ul>
      </div>
      <p class="tamil-helper" style="margin-top: 15px;">
        роЪроЯрпНроЯ роирпЛроХрпНроХроорпН:<br>
        <span id="lawTamil"></span>
      </p>
    </section>

    <!-- SECTION 6: Trust Drift (Initially Hidden) -->
    <section id="driftSection" class="hidden">
      <h2>Trust Drift Detected</h2>
      <div class="drift-box">
        <h3>Where Trust Boundaries Break:</h3>
        <ul id="driftList"></ul>
      </div>
      <p class="tamil-helper" style="margin-top: 15px;">
        роироорпНрокро┐роХрпНроХрпИ роЪро┐родрпИро╡рпБ:<br>
        <span id="driftTamil"></span>
      </p>
    </section>

    <!-- SECTION 7: PPDTF Analysis (Initially Hidden) -->
    <section id="ppdtfSection" class="hidden">
      <h2>PPDTF Analysis</h2>
      <div class="ppdtf-box">
        <div id="ppdtfBreakdown"></div>
      </div>
    </section>

    <!-- SECTION 8: Impact & Trust Score (Initially Hidden) -->
    <section id="impactSection" class="hidden">
      <h2>Impact Evaluation</h2>
      
      <div style="text-align: center; margin: 20px 0;">
        <p style="color: #94a3b8; margin-bottom: 10px;">Impact Level:</p>
        <span id="impactBadge" class="impact-badge">тАУ</span>
        <p id="impactFactors" style="color: #64748b; font-size: 0.9em; margin-top: 10px;">тАУ</p>
      </div>

      <div style="text-align: center; margin: 30px 0;">
        <p style="color: #94a3b8; margin-bottom: 10px;">Civic Trust Score:</p>
        <div class="score-display"><span id="trustScore">тАУ</span> / 100</div>
        <p style="color: #64748b; font-size: 0.9em;">
          (<span id="scoreStatus">тАУ</span>)
        </p>
      </div>

      <div class="law-box">
        <h3>Score Deductions:</h3>
        <ul id="deductionsList"></ul>
      </div>
    </section>

    <!-- SECTION 9: Next Actions (Initially Hidden) -->
    <section id="actionsSection" class="hidden">
      <h2>What Should YOU Do Now?</h2>
      <p id="userRoleDisplay" style="color: #22d3ee; font-weight: bold; margin-bottom: 15px;">Your Role</p>

      <div id="responsibilityContext" class="hidden" style="background: #1e293b; padding: 15px; margin-bottom: 15px; border-left: 4px solid #f59e0b; border-radius: 4px;">
        <h3 style="color: #f59e0b; font-size: 1em; margin-bottom: 8px;">Your Responsibility:</h3>
        <p id="responsibilityText" style="color: #cbd5e1; margin-bottom: 10px;"></p>
        <h3 style="color: #f59e0b; font-size: 1em; margin-bottom: 8px;">Trust Impact:</h3>
        <p id="trustImpactText" style="color: #cbd5e1;"></p>
      </div>

      <div class="law-box">
        <h3>Recommended Actions:</h3>
        <ul id="actionsList"></ul>
      </div>

      <p class="tamil-helper" style="margin-top: 15px;">
        <span id="actionsTamil"></span>
      </p>
    </section>

    <!-- SECTION 10: System Interpretation (Initially Hidden) -->
    <section id="resultSection" class="hidden">
      <h2>Complete System Interpretation (Printable Report)</h2>
      <div class="result-box" id="result">
        Awaiting analysis...
      </div>
      <button id="printBtn" onclick="printReport()" class="hidden" style="margin-top: 15px; background: linear-gradient(to right, #16a34a, #059669);">
        ЁЯЦия╕П Print Report / роЕро▒ро┐роХрпНроХрпИропрпИ роЕроЪрпНроЪро┐роЯрпБроХ
      </button>
    </section>

  </div>

  <script src="app.js"></script>
</body>
</html>
